<%= form_with model: @post, local: true do |form| %>
  <%= render 'shared/error_message', object: form.object %>
  <div class="flex justify-center mt-4">
    <div class="flex-col w-96">
      <p class="text-lg font-bold text-center">現在のデスク画像</p>
      <%= image_tag main_image_existence(@post), class: "w-auto h-72 object-contain" %>
      <div class="border p-2">
        <p class="break-words mb-3">新しくデスク画像を登録する場合は、下記からファイルを選択してください。</p>
        <%= form.label :image %>
        <%= form.file_field :image, accept: "image/png, image/jpeg", class: 'file-input file-input-bordered max-w-xs' %>
      </div>
    </div>
    <div class="flex-col ml-4">
      <p class="text-center font-bold"><%= form.label :content %></p>
      <%= form.text_area :content, class: "textarea textarea-bordered w-96 h-72 " %>
    </div>
  </div>

  <template id="gadget-form-template">
    <%= form.fields_for :gadgets, Gadget.new, child_index: "NEW_RECORD" do |gadget_form| %>
      <div id="gadget-fields_NEW_RECORD" class="hidden">
        <%= gadget_form.text_field :genre, { id: 'main_form_genre_NEW_RECORD', readonly: true } %>
        <%= gadget_form.url_field :image_url, id: 'main_form_imageUrl_NEW_RECORD' %>
        <%= gadget_form.text_field :name, id: 'main_form_name_NEW_RECORD' %>
        <%= gadget_form.text_field :brand, id: 'main_form_maker_NEW_RECORD' %>
        <%= gadget_form.number_field :price, id: 'main_form_price_NEW_RECORD' %>
      </div>
    <% end %>
  </template>

  <template id="gadget-display-template">
    <div id="subitem" class="hidden border border-gray-200 rounded-lg p-6 shadow">
      <p id="main_form_genre_display" class="badge badge-ghost text-lg"></p>
      <img id="main_form_imageUrl_display">
      <div class="flex">
        <p>メーカー：</p>
        <p id="main_form_maker_display"></p>
      </div>
      <p id="main_form_name_display"></p>
      <p id="main_form_price_display"></p>
      <button type="button" id="main_form_delete_btn" class="btn" data-controller="form-btn" data-action="click->form-btn#delete" data-form-btn-target="deleteBtn">削除</button>
    </div>
  </template>

  <div id="gadget-display-item-container" class="grid grid-cols-4 gap-3 grid-flow-row"></div>
  <div id="gadget-hidden-display-item-container"></div>

  <%= form.submit '投稿する', class: 'btn m-6' %>
<% end %>

<%= render 'posts/modal_gadget' %>