<%= form_with model: @post, url: posts_path, local: true do |form| %>
  <div class="flex flex-col items-center">
    <%= render 'shared/error_message', object: form.object %>
    <%= form.label :image %>
    <%= form.file_field :image, accept: "image/png, image/jpeg", class: 'file-input file-input-bordered w-full max-w-xs' %>

    <%= render 'posts/modal_gadget', form: form %>

    <div class="">
      <%= form.fields_for :gadgets do |gadget_form| %>
        <%= gadget_form.select :genre, Gadget.genres_i18n.invert, {include_blank: '未選択'}, { id: 'main_form_genre', readonly: true } %>
        <%= gadget_form.url_field :image_url, id: 'main_form_imageUrl', class: 'input input-bordered w-full max-w-xs' %>
        <%= gadget_form.text_field :name, id: 'main_form_name', class: 'input input-bordered w-full max-w-xs' %>
        <%= gadget_form.text_field :brand, id: 'main_form_brand', class: 'input input-bordered w-full max-w-xs' %>
        <%= gadget_form.number_field :price, id: 'main_form_price', class: 'input input-bordered w-full max-w-xs' %>
      <% end %>
    </div>

    <div id="subitems" class="hidden border border-gray-200 rounded-lg p-6 shadow">
      <p id="main_form_genre_display" class="text-xl font-bold"></p>
      <p id="main_form_imageUrl_display"></p>
      <p id="main_form_name_display"></p>
      <p id="main_form_brand_display"></p>
      <p id="main_form_price_display"></p>
    </div>

    <%= form.submit '投稿する', class: 'btn m-6' %>
  </div>
<% end %>